<dom-module id="overlay-scaling-style">
    <template>
        <style>
        :host([scale]) {
            width: 800px !important;
            height: 450px !important;
            transform-origin: 0 0 !important;
            padding-top: 16px;
            position: relative;
        }
        </style>
    </template>
</dom-module>
<script>
Capira.OverlayScaling = {
    get parent() {
        if (this.parentNode.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {
            return this.parentNode.host;
        }
        return this.parentNode;
    },
    get elementToScale(){
        return this;
    },
    attached: function() {

        var that = this;

        function resize() {
            var parentWidth = window.innerWidth;
            if (that.parent && that.parent.clientWidth) {
                parentWidth = that.parent.clientWidth;
            }

            if (parentWidth < 800) {
                var scalingFactor = parentWidth / 800;
                that.elementToScale.style.transform = 'scale(' + scalingFactor + ')';
                that.elementToScale.setAttribute('scale', true);
            } else {
                that.elementToScale.removeAttribute('scale');
                that.elementToScale.style.transform = 'none';
            }
        }

        window.addEventListener('resize', resize, false);
        resize();
    }
}
</script>
