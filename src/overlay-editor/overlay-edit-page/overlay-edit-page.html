<link rel="import" href="../../editor/edit-page/edit-page.html">
<link rel="import" href="../overlay-top-bar/overlay-top-bar.html">
<script>
'use strict';
window.Capira = window.Capira || {};
window.Capira.OverlayEditPageImpl = {
    properties: {
        overlay: {
            type: Object,
            notify: true,
            observer: 'overlayChanged'
        }
    },
    observers: ['_timestampChanged(overlay.event.*)'],
    overlayChanged: function() {
        //abstract
    },
    _timestampChanged: function() {
        if (window.app && app.player) {
            app.player.pause();
            if (this.overlay.event && this.overlay.event.start) {
                app.player.seekTo(this.overlay.event.start);
            }

            if (this.timestampTimeout) {
                clearTimeout(this.timestampTimeout);
            }
            this.timestampTimeout = setTimeout(function() {
                app.player.start();
            }, 1000);
        }
    }
};

window.Capira.OverlayEditPage = [Capira.EditPage, Capira.OverlayEditPageImpl];
</script>
