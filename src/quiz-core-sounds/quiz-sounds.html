<link rel="import" href="../quiz/quiz-grade.html">
<dom-module id="quiz-sounds">
    <template>
        <audio id="correct" preload="auto" autobuffer="true">
            <source src="/static/sound/correct.ogg" id="oggSource" type="audio/ogg">
            <source src="/static/sound/correct.mp3" id="mp3Source" type="audio/mpeg">
        </audio>
        <audio id="incorrect" preload="auto" autobuffer="true">
            <source src="/static/sound/incorrect.ogg" id="oggSource" type="audio/ogg">
            <source src="/static/sound/incorrect.mp3" id="mp3Source" type="audio/mpeg">
        </audio>
        <audio id="neutral" preload="auto" autobuffer="true">
            <source src="/static/sound/neutral.ogg" id="oggSource" type="audio/ogg">
            <source src="/static/sound/neutral.mp3" id="mp3Source" type="audio/mpeg">
        </audio>
    </template>
</dom-module>
<script>
'use strict';
Polymer({
    is: 'quiz-sounds',
    properties: {
        volumes: {
            value: {
                'correct': 0.8,
                'incorrect': 0.08,
                'neutral': 0.8,
                'soundsTheme': 1
            }
        }
    },

    playGrade: function(grade) {
        switch (grade) {
            case Capira.Grade.CORRECT:
                this._play('correct');
                break;
            case Capira.Grade.INCORRECT:
                this._play('incorrect');
                break;
            case Capira.Grade.NEUTRAL:
                this._play('neutral');
                break;
            default:
                this._play('neutral');
        }
    },

    _play: function(sound) {
        var audio = this.$[sound];
        if (audio.readyState > 0) {
            audio.volume = this.volumes[sound];
            audio.pause();
            audio.currentTime = 0;
            audio.play();
        }
    }
});
</script>
