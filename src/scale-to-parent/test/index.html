<html>

<head>
    <meta charset="UTF-8">
    <title>scale-to-parent basic tests</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <script src="../../../bower_components/webcomponentsjs/webcomponents-lite.js"></script>
    <script src="../../../bower_components/web-component-tester/browser.js"></script>
    <script src="../../../bower_components/test-fixture/test-fixture-mocha.js"></script>
    <script src="../../../bower_components/iron-test-helpers/mock-interactions.js"></script>
    <link rel="import" href="../../../bower_components/test-fixture/test-fixture.html">
    <!-- build:js ../editor/index.html -->
    <link rel="import" href="../../capira-helper/shadow-dom.html">
    <link rel="import" href="../../../../bower_components/polymer/polymer.html">
    <link rel="import" href="../scale-to-parent.html">
    <!-- endbuild -->
    <link rel="import" href="dummy-element.html">
</head>
<style>
.test1,
.test2,
.test3,
.test4 {
    margin: 8px;
}

.test1 {
    width: 800px;
    height: 450px;
}

.test2 {
    width: 400px;
    height: 225px;
}

.test3 {
    width: 200px;
    height: 113px;
}

.test4 {
    width: 200px;
    height: 113px;
}

.test-area {
    background-color: green;
    width: 800px;
    height: 450px;
    text-align: center;
}
</style>
</head>

<body unresolved>
    <span id="browser-sync-binding"></span>
    <div class="test1">
        <scale-to-parent>
            <div class="test-area" id="scaler1">Test Area 800x450</div>
        </scale-to-parent>
    </div>
    <div class="test2">
        <scale-to-parent>
            <div class="test-area" id="scaler2">Test Area 400x225</div>
        </scale-to-parent>
    </div>
    <div class="test3">
        <scale-to-parent>
            <div class="test-area" id="scaler3">Test Area 200x112.5</div>
        </scale-to-parent>
    </div>
    <dummy-element class="test4">
        <div class="test-area" id="scaler4">Test Area 200x112.5</div>
    </dummy-element>
</body>
<script>
'use strict';
suite('<scale-to-parent>', function() {

    function testScaling(element, expectedWidth, expectedHeight) {
        var rect = element.getBoundingClientRect();
        console.log('width:', rect.width, expectedWidth);
        assert(rect.width === expectedWidth, 'Correct width');
        assert(rect.height === expectedHeight, 'Correct height');
    }

    function testScalingInDom(id, expectedWidth, expectedHeight) {
        var element = document.querySelector('#scaler' + id);
        testScaling(element, expectedWidth, expectedHeight);
    }

    function testScalingInShadowDom(id, expectedWidth, expectedHeight) {
        var dummyElem = document.querySelector('.test' + id);
        var element = dummyElem.$['scaler' + id];
        testScaling(element, expectedWidth, expectedHeight);
    }

    test('scales correctly neutral', function() {
        testScalingInDom(1, 800, 450);
    });

    test('scales correctly up', function() {
        testScalingInDom(2, 400, 225);
    });

    test('scales correctly down', function() {
        testScalingInDom(3, 200, 113);
    });

    test('scales correctly inside a shadow dom', function() {
        testScalingInShadowDom(4, 200, 113);
    });
});
</script>
</body>

</html>
