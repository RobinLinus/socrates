<html>

<head>
    <meta charset="UTF-8">
    <title>short-answer-quiz basic tests</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <script src="../../../../bower_components/webcomponentsjs/webcomponents-lite.js"></script>
    <script src="../../../../bower_components/web-component-tester/browser.js"></script>
    <script src="../../../../bower_components/test-fixture/test-fixture-mocha.js"></script>
    <script src="../../../../bower_components/iron-test-helpers/mock-interactions.js"></script>
    <link rel="import" href="../../../../bower_components/test-fixture/test-fixture.html">
    <!-- build:js ../editor/elements.html -->
    <link rel="import" href="../short-answer-quiz.html">
    <!-- endbuild -->
</head>

<body>
    <test-fixture id="quiz">
        <template>
            <short-answer-quiz></short-answer-quiz>
        </template>
    </test-fixture>
    <link rel="import" href="../demo/demo-data.html">
    <script>
    'use strict';
    suite('<short-answer-quiz>', function() {
        var quiz, input;
        setup(function() {
            quiz = fixture('quiz');
            input = quiz.$$('paper-input');
        });

        function testOverlay(overlay, done) {
            quiz.overlay = overlay;

            MockInteractions.focus(input);
            MockInteractions.pressAndReleaseKeyOn(input, 57);

            Polymer.Base.async(function() {
                try {
                    console.log('value', quiz.value);
                    assert(quiz.value === '9', 'value was set');
                    done();
                } catch (e) {
                    done(e);
                }
            }, 10);
        }


        test('underline is colored when input is focused', function(done) {
            var container = fixture('quiz');
            var input = container.$$('paper-input');
            MockInteractions.focus(input);
            requestAnimationFrame(function() {
                assert.isTrue(input.focused, 'line is highlighted when input is focused');
                done();
            });
        });

        test('is alive', function(done) {
            testOverlay(window.dummyOverlay, done);
        });
    });
    </script>
</body>

</html>
